<nz-modal class="camera-modal-container"  [nzVisible]="isVisible" [nzTitle]="'摄像头信息'" [nzContent]="modalContent" (nzOnCancel)="handleCancel($event)" (nzOnOk)="handleOk($event)" [nzConfirmLoading]="isConfirmLoading" nzFooter="" [nzMaskClosable]="false">
  <ng-template #modalContent>
    <form nz-form [formGroup]="validateForm">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>Id</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
          <nz-input  formControlName="id" [nzPlaceHolder]="'自动获取'" [nzDisabled]="'true'" [(ngModel)]="_formData.id" [nzType]="'text'" [nzSize]="'large'">
          </nz-input>
        </div>
        <!-- </div>
         <div nz-form-item nz-row>-->
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>摄像头类型</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control >
          <nz-input [appFormValidate]="validateForm" formControlName="type" [(ngModel)]="_formData.type"  [nzType]="'text'" [nzPlaceHolder]="'摄像头类型'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>摄像头名称</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input [appFormValidate]="validateForm" formControlName="name" [(ngModel)]="_formData.name"  [nzType]="'text'" [nzPlaceHolder]="'摄像头名称'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>序列号</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
          <nz-input [appFormValidate]="validateForm" formControlName="serialNum" [(ngModel)]="_formData.serialNum"  [nzType]="'text'" [nzPlaceHolder]="'序列号'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>ip地址</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
          <nz-input [appFormValidate]="validateForm" formControlName="ip" [(ngModel)]="_formData.ip" [nzType]="'text'"  [nzPlaceHolder]="'ip地址'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>port</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input [appFormValidate]="validateForm" formControlName="port" [(ngModel)]="_formData.port" [nzPlaceHolder]="'端口号'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>分析仪名称</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-select formControlName="analyserID" [(ngModel)]="_formData.analyserID" [nzPlaceHolder]="'分析仪名称'" [nzSize]="'large'" nzAllowClear>
              <nz-option *ngFor="let option of options" [nzLabel]="option.name" [nzValue]="option.id">
                <ng-template #nzOptionTemplate>{{option.name}}</ng-template>
              </nz-option>
            </nz-select>
          </div>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>流媒体IP</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="mediaIP" [(ngModel)]="_formData.mediaIP" [nzPlaceHolder]="'流媒体IP'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>流媒体端口号</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
          <nz-input [appFormValidate]="validateForm" formControlName="mediaPort" [(ngModel)]="_formData.mediaPort" [nzType]="'text'"  [nzPlaceHolder]="'流媒体端口号'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>方向</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input [appFormValidate]="validateForm" formControlName="direction" [(ngModel)]="_formData.direction" [nzPlaceHolder]="'方向'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>区域ID</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="zoneID" [(ngModel)]="_formData.zoneID" [nzPlaceHolder]="'区域ID'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>策略ID</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="strategyID" [(ngModel)]="_formData.strategyID" [nzPlaceHolder]="'策略ID'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>门禁ID</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="doorID" [(ngModel)]="_formData.doorID" [nzPlaceHolder]="'门禁ID'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>用户名</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="user" [(ngModel)]="_formData.user" [nzPlaceHolder]="'用户名'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>密码</label>
        </div>
        <div>
          <div nz-col [nzSpan]="6" nz-form-control nzHasFeedback>
            <nz-input formControlName="pwd" [(ngModel)]="_formData.pwd" [nzPlaceHolder]="'密码'" [nzType]="'text'" [nzSize]="'large'">
            </nz-input>
          </div>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>rtsp端口</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="rtspPort"  [(ngModel)]="_formData.rtspPort"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'tsp端口'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row >
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>resp路径</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="rtspPath"  [(ngModel)]="_formData.rtspPath"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'resp路径'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>摄像头品牌</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="camInfo"  [(ngModel)]="_formData.camInfo"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'摄像头品牌'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>选择地图</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <!-- <nz-input formControlName="districtID"  [(ngModel)]="_formData.districtID"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'districtID'" [nzSize]="'large'">
         </nz-input> -->
          <div nz-col [nzSpan]="6" nz-form-control>
            <nz-select style="width: 120px;" formControlName="districtID"  [(ngModel)]="_formData.districtID"  (ngModelChange)="mapSelectHandler($event)"  [nzPlaceHolder]="'选择地图'" >
              <nz-option *ngFor="let option of mapOptions" [nzLabel]="option.name" [nzValue]="option.id">
                <ng-template #nzOptionTemplate>{{option.name}}</ng-template>
              </nz-option>
            </nz-select>
          </div>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>区域名称</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="districtName"  [nzDisabled]="'true'" [(ngModel)]="_formData.districtName"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'districtName'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>

      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>x轴坐标</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="camMapX"  [(ngModel)]="_formData.camMapX"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'x轴坐标'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>y轴坐标</label>
        </div>
        <div nz-col [nzSpan]="3" nz-form-control>
          <nz-input formControlName="camMapY"  [(ngModel)]="_formData.camMapY"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'y轴坐标'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5">
          <button nz-button style="background:#ccc;font-size:12px;text-align:center;" (click)="openMapModel($event)">
            <span>设置坐标</span>
          </button>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>摄像头状态</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="camState"  [(ngModel)]="_formData.camState"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'摄像头状态'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>流媒体类型</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="streamType"  [(ngModel)]="_formData.streamType"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'streamType'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>area</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="area"  [(ngModel)]="_formData.area"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'area'" [nzSize]="'large'">
          </nz-input>
        </div>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>areaID</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="areaID"  [(ngModel)]="_formData.areaID"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'areaID'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
      <div nz-col [nzSpan]="5" nz-form-label>
        <label nz-form-item-required>areaName</label>
      </div>
      <div nz-col [nzSpan]="6" nz-form-control>
        <nz-input formControlName="areaName"  [(ngModel)]="_formData.areaName"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'areaName'" [nzSize]="'large'">
        </nz-input>
      </div>
      <div nz-col [nzSpan]="5" nz-form-label>
        <label nz-form-item-required>distictUrl</label>
      </div>
      <div nz-col [nzSpan]="6" nz-form-control>
        <nz-input formControlName="distictUrl"  [(ngModel)]="_formData.distictUrl"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'distictUrl'" [nzSize]="'large'">
        </nz-input>
      </div>
    </div>
      <div nz-form-item nz-row>
        <div nz-col [nzSpan]="5" nz-form-label>
          <label nz-form-item-required>img_url</label>
        </div>
        <div nz-col [nzSpan]="6" nz-form-control>
          <nz-input formControlName="img_url"  [(ngModel)]="_formData.img_url"  [nzRows]="2" [nzType]="'text'" [nzPlaceHolder]="'img_url'" [nzSize]="'large'">
          </nz-input>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-col [nzOffset]="7" [nzSpan]="12" nz-form-control>
          <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="!validateForm.valid"  (click)="submitForm($event,validateForm.value)">提交</button>
          <button nz-button [nzSize]="'large'" (click)="resetForm($event)">重置</button>
        </div>
      </div>
    </form>
  </ng-template>
</nz-modal>



<nz-modal [nzVisible]="isShowMap"  [nzTitle]="'地图坐标设置'" [nzContent]="mapModelContent" (nzOnCancel)="handleMapCancel($event)"  class="map-model" [nzMaskClosable]="false">
  <ng-template #mapModelContent>
    <div class="map-img">
      <img class="camera" src="../../../../assets/images/map/camera-device.png" alt="" #camera (dragstart)="dragStartHandler($event)" >
      <img class="map" [src]="selectedMap&&selectedMap.value" alt=""  (dragover)="dragoverHandler($event)" (drop)="dropHandler($event)" >
    </div>
    <div class="map-action">
      <div class="floor-select">
        楼层: <nz-select style="width: 120px;" [(ngModel)]="selectedMap" (ngModelChange)="modalMapChangeHandle($event)">
        <nz-option *ngFor="let option of mapOptions" [nzLabel]="option.name" [nzValue]="option">
          <ng-template #nzOptionTemplate>{{option.name}}</ng-template>
        </nz-option>
      </nz-select>
      </div>
      <div class="confirm-btn">
        <button nz-button (click)="isShowMap=false;">
          <span>确定设置</span>
        </button>
      </div>
    </div>
  </ng-template>
</nz-modal>
